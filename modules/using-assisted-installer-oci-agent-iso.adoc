// Module included in the following assemblies:
//
// * installing/installing_oci/installing-oci-assisted-installer.adoc

:_mod-docs-content-type: PROCEDURE
[id="using-assisted-installer-oci-agent-iso_{context}"]
= Using the {ai-full} to generate an {oci}-compatible discovery ISO image

Create the cluster configuration and generate the discovery ISO image in the {ai-full} web console. 

.Prerequisites

* You created a child compartment and an object storage bucket on {oci}. For details, see _Creating {oci} resources and services_. For more information, see link:https://docs.oracle.com/iaas/Content/openshift-on-oci/installing-assisted.htm#provisioning-cloud-infrastructure[Provisioning Cloud Infrastructure ({oci} Console)] in the Oracle documentation.
* You reviewed details about the {product-title} installation and update processes.
* If you use a firewall and you plan to use a Telemetry service, you configured your firewall to allow {product-title} to access the sites required.
* Before you create a virtual machines (VM), see link:https://catalog.redhat.com/cloud/detail/216977[Cloud instance types (Red Hat Ecosystem Catalog portal)] to identify the supported {oci} VM shapes.

.Procedure

. Log into link:https://console.redhat.com/[{ai-full} web console] with your credentials.

. Select *Clusters* in the navigation pane, and then select *Create Cluster*.

. Scroll down to the end of the *Cluster Type* page, and select *Oracle Cloud Infrastructure (virtual machines)*. 
+
*What will they select for BM? 
Is the above correct or should I provide them this link that takes them directly to the cluster page?:
Open the link:https://console.redhat.com/openshift/assisted-installer/clusters/~new[Install OpenShift with the Assisted Installer] page on the Hybrid Cloud Console.*

. On the *Create an OpenShift Cluster* page, select the *Interactive* tile.

. On the *Cluster Details* page, complete the following fields:
+
[cols="1,3",options="header",subs="quotes"]
|===
|Field |Action required

|*Cluster name*
|Specify the name of your cluster, such as `oci`.

|*Base domain*
|Specify the base domain of the cluster, such as `openshift-clusters.example.com`. Provided you previously created a compartment on {oci}, you can get this information by going to *DNS management* -> *Zones* -> *List scope* and then selecting the parent compartment. Your base domain should show under the *Public zones* tab.
//I'm not sure this is still relevant - it may be the other way round now, that we first create the base domain and send it to OCI to add to the terraform

|*OpenShift version*
| Specify `OpenShift 4.17` or a later version.

|*CPU architecture*
| Specify `x86_64` or `Arm64`.

|*Integrate with external partner platforms*
|Specify `Oracle Cloud Infrastructure`.

After you specify this value, the *Include custom manifests* checkbox is selected by default.
|===

. On the *Operators* page, click *Next*.

. On the *Host Discovery* page, click *Add hosts* and do the following:

.. For the *Provisioning type* field, select *Minimal image file*. This is because, for the {oci} integration, the boot drive is also the installation drive. 
+
//From Adrien's demo - is this correct? 23:46

.. For the *SSH public key* field, add your SSH key from your local system.
+
[TIP]
====
You can create an SSH authentication key pair by using the `ssh-keygen` tool.
====

.. Click *Generate Discovery ISO* to generate the discovery ISO image file.

.. Download the file to your local system.

